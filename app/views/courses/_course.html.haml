.col
  .card.h-100
    .card-header 
      .fa.fa-graduation-cap
      = link_to course.title, course_path(course)
    .card-body 
      = course.description 
    .card-footer 
      .text-center
        = enrollment_button(course)
        .row
        = review_button(course)
        /= number_to_currency(course.price)
    .card-footer 


      .row 
        .col-md-6
          .text-warning.fa.fa-star
          = course.average_rating
          
          /= course.enrollments.count
          .fa.fa-user-graduate
          Enrollments: 
          = course.enrollments_count
          .fa.fa-tasks
          /= course.lessons.count
          = course.lessons_count
        .col-md-6
          .text-end
            .fa.fa-chalkboard-teacher
            = link_to course.user&.username, user_path(course.user)

            




      
    -# .card-footer 
    -#   .row 
    -#     .col-md-6
    -#       .fa.fa-globe-africa
    -#       = course.language 
    -#     .col-md-6
    -#       .text-end
    -#         .fa.fa-signal
    -#         = course.level

    .card-footer 
      .row 
        .col-md-6
          .far.fa-clock
          = course.created_at.strftime('%d-%b-%Y')
        .col-md-6
          .text-end
            /.fa.fa-chalkboard-teacher
            /= link_to course.user&.username, user_path(course.user) #this breaks when logging out // also on the home page, the username is different when the course is listed more than once
            
    - if current_user
      - if policy(course).edit?
        .card-footer 
          - if policy(course).owner?
            = link_to 'Add Lesson', new_course_lesson_path(course, @lesson), class: 'btn btn-primary btn-sm'
          /= link_to 'Show', course, class: 'btn btn-sm btn-primary'
          = link_to 'Edit', edit_course_path(course) , class: 'btn btn-sm btn-warning' 
          = link_to 'Destroy', course, method: :delete, data: { confirm: 'Are you sure?' } , class: 'btn btn-sm btn-danger' 